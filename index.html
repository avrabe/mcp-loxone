<!--
SPDX-License-Identifier: MIT
Copyright (c) 2025 Ralf Anton Beier
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCP Loxone Gen1 - Model Context Protocol for Loxone Home Automation</title>
    <style>
        /* Atkinson Font Import */
        @font-face {
            font-family: 'Atkinson Hyperlegible';
            src: url('https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:wght@400;700&display=swap');
            font-weight: 400;
            font-style: normal;
        }

        /* CSS Variables for Home Automation Theme */
        :root {
            --primary-color: #059669;
            --secondary-color: #0891b2;
            --accent-color: #f59e0b;
            --warning-color: #dc2626;
            --bg-primary: #0c1821;
            --bg-secondary: #1a2332;
            --bg-card: #243447;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --gradient-1: linear-gradient(135deg, #059669 0%, #0891b2 100%);
            --gradient-2: linear-gradient(135deg, #f59e0b 0%, #059669 100%);
            --gradient-3: linear-gradient(135deg, #0891b2 0%, #059669 50%, #f59e0b 100%);
            --shadow-glow: 0 0 20px rgba(5, 150, 105, 0.3);
            --shadow-card: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Global Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Atkinson Hyperlegible', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        html {
            scroll-behavior: smooth;
        }

        /* Animated Background Pattern */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 15% 25%, rgba(5, 150, 105, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 85% 75%, rgba(8, 145, 178, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 45% 60%, rgba(245, 158, 11, 0.05) 0%, transparent 50%);
            animation: backgroundPulse 15s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            width: 100%;
            padding: 1rem 2rem;
            background: rgba(12, 24, 33, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(5, 150, 105, 0.2);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        nav.scrolled {
            background: rgba(12, 24, 33, 0.95);
            box-shadow: var(--shadow-glow);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo::before {
            content: 'üè†';
            font-size: 1.2rem;
            filter: none;
            -webkit-text-fill-color: initial;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--gradient-1);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
            padding: 0 2rem;
        }

        .hero-content {
            max-width: 900px;
            animation: fadeInUp 1s ease-out;
        }

        .hero-badge {
            display: inline-block;
            background: rgba(5, 150, 105, 0.1);
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            animation: fadeInUp 1s ease-out 0.2s both;
        }

        .hero h1 {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            margin-bottom: 1rem;
            background: var(--gradient-3);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 3s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { filter: drop-shadow(0 0 5px rgba(5, 150, 105, 0.3)); }
            to { filter: drop-shadow(0 0 15px rgba(5, 150, 105, 0.6)); }
        }

        .hero p {
            font-size: 1.25rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            animation: fadeInUp 1s ease-out 0.4s both;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            animation: fadeInUp 1s ease-out 0.6s both;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-family: inherit;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--gradient-1);
            color: white;
        }

        .btn-secondary {
            background: transparent;
            color: var(--text-primary);
            border: 2px solid var(--primary-color);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-glow);
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        /* Home Icons Animation */
        .home-icons {
            position: absolute;
            bottom: 10%;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 2rem;
            opacity: 0.6;
        }

        .home-icon {
            font-size: 2rem;
            animation: float 3s ease-in-out infinite;
        }

        .home-icon:nth-child(2) { animation-delay: -1s; }
        .home-icon:nth-child(3) { animation-delay: -2s; }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        /* Section Styles */
        .section {
            padding: 5rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .section h2 {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 3rem;
            background: var(--gradient-1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .feature-card {
            background: var(--bg-card);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid rgba(5, 150, 105, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .feature-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-1);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-color);
            box-shadow: var(--shadow-glow);
        }

        .feature-card:hover::before {
            transform: scaleX(1);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            display: block;
        }

        .feature-card h3 {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        /* Stats Section */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin: 3rem 0;
        }

        .stat-card {
            text-align: center;
            padding: 2rem 1rem;
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid rgba(5, 150, 105, 0.1);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            background: var(--gradient-2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: block;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Installation Steps */
        .install-steps {
            display: grid;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .install-step {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 1.5rem;
            background: var(--bg-card);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        .step-number {
            background: var(--gradient-1);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            flex-shrink: 0;
        }

        .step-content h4 {
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .step-content p {
            color: var(--text-secondary);
        }

        /* Code Block */
        .code-container {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            border: 1px solid rgba(5, 150, 105, 0.2);
            position: relative;
            overflow: hidden;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(5, 150, 105, 0.2);
        }

        .code-title {
            color: var(--accent-color);
            font-weight: 600;
        }

        .copy-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.25rem 0.75rem;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .copy-btn:hover {
            background: var(--secondary-color);
        }

        pre {
            margin: 0;
            font-family: 'Fira Code', 'Courier New', monospace;
            color: var(--text-primary);
            overflow-x: auto;
            font-size: 0.9rem;
        }

        /* Language Examples */
        .language-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .language-card {
            background: var(--bg-card);
            padding: 1.5rem;
            border-radius: 8px;
            border: 1px solid rgba(5, 150, 105, 0.2);
        }

        .language-card h4 {
            color: var(--accent-color);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .language-card ul {
            list-style: none;
            padding: 0;
        }

        .language-card li {
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
            padding-left: 1rem;
            position: relative;
        }

        .language-card li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: var(--primary-color);
        }

        /* Footer */
        footer {
            background: var(--bg-secondary);
            padding: 3rem 2rem 1rem;
            text-align: center;
            border-top: 1px solid rgba(5, 150, 105, 0.2);
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: var(--primary-color);
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-on-scroll {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }

        .animate-on-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Pulse Animation for Indicators */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(5, 150, 105, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(5, 150, 105, 0); }
            100% { box-shadow: 0 0 0 0 rgba(5, 150, 105, 0); }
        }

        .btn-primary:hover {
            animation: pulse 1.5s infinite;
        }

        /* Matrix-style Automation Quotes Background */
        .matrix-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -2;
            overflow: hidden;
        }

        .automation-quote {
            position: absolute;
            font-family: 'Courier New', monospace;
            font-size: 2.7rem;
            color: rgba(5, 150, 105, 0.25);
            white-space: pre-line;
            animation: matrixFall linear infinite;
            text-shadow: 0 0 8px rgba(5, 150, 105, 0.4);
            font-weight: bold;
            writing-mode: vertical-lr;
            text-orientation: upright;
            letter-spacing: 0.5rem;
        }

        @keyframes matrixFall {
            0% {
                transform: translateY(-100vh);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(calc(100vh + 200px));
                opacity: 0;
            }
        }

        /* Different animation speeds for variety - longer durations */
        .automation-quote:nth-child(odd) {
            animation-duration: 25s;
        }
        
        .automation-quote:nth-child(even) {
            animation-duration: 30s;
        }
        
        .automation-quote:nth-child(3n) {
            animation-duration: 28s;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }
            
            .hero-content {
                padding: 0 1rem;
            }
            
            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 200px;
                justify-content: center;
            }
            
            .section {
                padding: 3rem 1rem;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
            
            .home-icons {
                display: none;
            }
        }

        /* Device Status Indicators */
        .device-status {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--bg-card);
            border-radius: 6px;
            border: 1px solid rgba(5, 150, 105, 0.2);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--primary-color);
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Test Coverage Chart Styles */
        .coverage-container {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 1.5rem;
            background: var(--bg-card);
            border-radius: 12px;
            border: 1px solid rgba(5, 150, 105, 0.2);
            margin: 1rem 0;
        }

        .coverage-chart {
            position: relative;
            width: 120px;
            height: 120px;
            margin-bottom: 1rem;
        }

        .coverage-circle {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: conic-gradient(
                var(--primary-color) 0deg,
                var(--primary-color) 0deg,
                var(--bg-secondary) 0deg,
                var(--bg-secondary) 360deg
            );
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            animation: coverageRotate 2s ease-out;
        }

        .coverage-circle::before {
            content: '';
            position: absolute;
            width: 80px;
            height: 80px;
            background: var(--bg-card);
            border-radius: 50%;
        }

        .coverage-percentage {
            position: relative;
            z-index: 1;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .coverage-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-align: center;
        }

        .coverage-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            margin-top: 1rem;
            width: 100%;
        }

        .coverage-item {
            text-align: center;
            padding: 0.5rem;
            background: var(--bg-secondary);
            border-radius: 6px;
            border: 1px solid rgba(5, 150, 105, 0.1);
        }

        .coverage-item-value {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .coverage-item-label {
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        @keyframes coverageRotate {
            from { transform: rotate(-90deg); }
            to { transform: rotate(0deg); }
        }

        /* Virtual Terminal Styles */
        .terminal-demo {
            background: #1a1a1a;
            border-radius: 12px;
            margin: 2rem 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            border: 1px solid #333;
            font-family: 'Atkinson Hyperlegible', 'Courier New', monospace;
        }

        .terminal-header {
            background: #2d2d2d;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #444;
        }

        .terminal-title {
            color: #e0e0e0;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .terminal-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .terminal-btn {
            background: #4a4a4a;
            color: #e0e0e0;
            border: none;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .terminal-btn:hover {
            background: #5a5a5a;
        }

        .terminal-light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            opacity: 0.6;
        }

        .terminal-light.red { background: #ff5f56; }
        .terminal-light.yellow { background: #ffbd2e; }
        .terminal-light.green { background: #27ca3f; }

        .terminal-body {
            background: #1a1a1a;
            padding: 1rem;
            min-height: 400px;
            max-height: 500px;
            overflow-y: auto;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .terminal-line {
            color: #e0e0e0;
            margin-bottom: 0.2rem;
            white-space: pre-wrap;
            word-break: break-word;
        }

        .terminal-prompt {
            color: #27ca3f;
        }

        .terminal-input {
            color: #61dafb;
        }

        .terminal-output {
            color: #e0e0e0;
        }

        .terminal-success {
            color: #27ca3f;
        }

        .terminal-info {
            color: #61dafb;
        }

        .terminal-warning {
            color: #ffbd2e;
        }

        .terminal-cursor {
            background: #e0e0e0;
            animation: blink 1s infinite;
            padding: 0 2px;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0; }
        }

        .terminal-typing {
            display: inline;
        }

        /* Responsive terminal */
        @media (max-width: 768px) {
            .terminal-body {
                font-size: 0.8rem;
                padding: 0.75rem;
                min-height: 350px;
            }
            
            .terminal-header {
                padding: 0.5rem 0.75rem;
            }
            
            .terminal-title {
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <!-- Matrix-style Automation Background -->
    <div class="matrix-background" id="matrix-bg"></div>

    <!-- Navigation -->
    <nav id="navbar">
        <div class="nav-container">
            <div class="logo">MCP Loxone Gen1</div>
            <div class="nav-links">
                <a href="#home">Home</a>
                <a href="#features">Features</a>
                <a href="#installation">Setup</a>
                <a href="#deployment">Deploy</a>
                <a href="#examples">Examples</a>
                <a href="#security">Security</a>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <div class="hero-badge">Model Context Protocol</div>
            <h1>Intelligent Loxone Control for AI</h1>
            <p>Generic Model Context Protocol server that automatically discovers your Loxone Generation 1 devices and exposes only available features to AI assistants. Supports natural language commands in German, English, or mixed languages.</p>
            <div class="cta-buttons">
                <a href="#installation" class="btn btn-primary">
                    üöÄ Quick Start
                </a>
                <a href="https://github.com/avrabe/mcp-loxone-gen1" class="btn btn-secondary">
                    üìÇ View on GitHub
                </a>
            </div>
        </div>
        <div class="home-icons">
            <div class="home-icon">üí°</div>
            <div class="home-icon">üè†</div>
            <div class="home-icon">üîß</div>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="section animate-on-scroll">
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-number">‚àû</span>
                <div class="stat-label">Device Types Supported</div>
            </div>
            <div class="stat-card">
                <span class="stat-number">27</span>
                <div class="stat-label">MCP Tools</div>
            </div>
            <div class="stat-card">
                <span class="stat-number">7</span>
                <div class="stat-label">Feature Categories</div>
            </div>
            <div class="stat-card">
                <span class="stat-number">100%</span>
                <div class="stat-label">Configuration Coverage</div>
            </div>
        </div>

        <!-- Test Coverage Section -->
        <div class="coverage-container animate-on-scroll">
            <div class="coverage-chart">
                <div class="coverage-circle" id="coverage-circle">
                    <div class="coverage-percentage" id="coverage-percentage">--%</div>
                </div>
            </div>
            <div class="coverage-label">Test Coverage</div>
            <div class="coverage-details" id="coverage-details">
                <div class="coverage-item">
                    <div class="coverage-item-value" id="tests-passed">--</div>
                    <div class="coverage-item-label">Tests Passed</div>
                </div>
                <div class="coverage-item">
                    <div class="coverage-item-value" id="lines-covered">--</div>
                    <div class="coverage-item-label">Lines Covered</div>
                </div>
                <div class="coverage-item">
                    <div class="coverage-item-value" id="functions-tested">--</div>
                    <div class="coverage-item-label">Functions</div>
                </div>
                <div class="coverage-item">
                    <div class="coverage-item-value" id="branches-covered">--</div>
                    <div class="coverage-item-label">Branches</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="section animate-on-scroll" id="features">
        <h2>Adaptive System Discovery</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üåç</div>
                <h3>Multilingual Support</h3>
                <p>Natural commands in German, English, or mixed languages. "Licht an", "turn off lights", or "Rolladen OG runter" - automatically adapts to your system's available devices.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üé≠</div>
                <h3>Scene Management</h3>
                <p>Intelligent capability detection automatically discovers lights, blinds, weather sensors, security devices, and more - only exposing features your system actually has.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìä</div>
                <h3>Sensor Monitoring</h3>
                <p>Smart device discovery analyzes your Loxone structure and automatically categorizes devices by type, room, and function - no manual configuration needed.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üí°</div>
                <h3>Lighting Presets</h3>
                <p>Universal device control with intelligent action mapping - automatically handles lights, blinds, switches, sensors based on your specific configuration.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üè†</div>
                <h3>Room Intelligence</h3>
                <p>Advanced reconnection system with automatic token refresh, WebSocket monitoring, and connection health checks for reliable 24/7 operation.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üîí</div>
                <h3>Local Keychain Security</h3>
                <p>Configuration-aware AI assistance - prevents attempts to control non-existent devices and provides clear guidance on what your system can actually do.</p>
            </div>
        </div>

        <!-- Device Status -->
        <div class="device-status">
            <div class="status-item">
                <div class="status-dot"></div>
                <span>Auto-Discovery Active</span>
            </div>
            <div class="status-item">
                <div class="status-dot"></div>
                <span>Capability Detection</span>
            </div>
            <div class="status-item">
                <div class="status-dot"></div>
                <span>Configuration-Aware</span>
            </div>
            <div class="status-item">
                <div class="status-dot"></div>
                <span>27 MCP Tools Available</span>
            </div>
        </div>
    </section>

    <!-- Installation Section -->
    <section class="section animate-on-scroll" id="installation">
        <h2>Deployment Options</h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">ü§ñ</div>
                <h3>Claude Desktop Integration</h3>
                <p>Direct integration with Claude Desktop app for conversational smart home control through natural language.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üåê</div>
                <h3>HTTP Server (SSE)</h3>
                <p>Web-based API server for integration with n8n, Home Assistant, webhooks, and browser applications.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚å®Ô∏è</div>
                <h3>Command Line (STDIN)</h3>
                <p>Direct command-line interface for scripting, automation, and integration with shell scripts.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üê≥</div>
                <h3>Docker Deployment</h3>
                <p>Containerized deployment with Docker Compose for production environments and service integration.</p>
            </div>
        </div>

        <div class="install-steps">
            <div class="install-step">
                <div class="step-number">1</div>
                <div class="step-content">
                    <h4>Install Dependencies</h4>
                    <p>Set up Python environment and install the MCP Loxone package</p>
                </div>
            </div>
            <div class="install-step">
                <div class="step-number">2</div>
                <div class="step-content">
                    <h4>Configure Credentials</h4>
                    <p>Secure setup storing credentials in your local system keychain - never in files or cloud</p>
                </div>
            </div>
            <div class="install-step">
                <div class="step-number">3</div>
                <div class="step-content">
                    <h4>Choose Deployment</h4>
                    <p>Select your preferred deployment method: Claude Desktop, HTTP Server, CLI, or Docker</p>
                </div>
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span class="code-title">Quick Installation</span>
                <button class="copy-btn" onclick="copyCode('install-code')">Copy</button>
            </div>
            <pre id="install-code"><code># Clone and setup
git clone https://github.com/avrabe/mcp-loxone-gen1.git
cd mcp-loxone-gen1
uv sync

# Configure credentials (one-time)
uvx --from . loxone-mcp setup</code></pre>
        </div>

        <!-- Virtual Terminal Demo -->
        <div class="terminal-demo">
            <div class="terminal-header">
                <span class="terminal-title">üíª Interactive Setup Demo</span>
                <div class="terminal-controls">
                    <button class="terminal-btn restart-btn" onclick="restartTerminalDemo()">‚ü≤ Restart</button>
                    <div class="terminal-light green"></div>
                    <div class="terminal-light yellow"></div>
                    <div class="terminal-light red"></div>
                </div>
            </div>
            <div class="terminal-body" id="terminal-output">
                <div class="terminal-line">$ <span class="terminal-cursor">_</span></div>
            </div>
        </div>
    </section>

    <!-- Deployment Methods Section -->
    <section class="section animate-on-scroll" id="deployment">
        <h2>Deployment Methods</h2>
        
        <div class="language-examples">
            <div class="language-card">
                <h4>ü§ñ Claude Desktop</h4>
                <div class="code-container">
                    <div class="code-header">
                        <span class="code-title">claude_desktop_config.json</span>
                        <button class="copy-btn" onclick="copyCode('claude-config')">Copy</button>
                    </div>
                    <pre id="claude-config"><code>{
  "mcpServers": {
    "loxone": {
      "command": "uvx",
      "args": ["--from", "/path/to/mcp-loxone-gen1", "loxone-mcp-server"],
      "env": {
        "LOXONE_LOG_LEVEL": "INFO"
      }
    }
  }
}</code></pre>
                </div>
            </div>
            
            <div class="language-card">
                <h4>üåê HTTP Server (SSE)</h4>
                <div class="code-container">
                    <div class="code-header">
                        <span class="code-title">Start Authenticated HTTP Server</span>
                        <button class="copy-btn" onclick="copyCode('sse-server')">Copy</button>
                    </div>
                    <pre id="sse-server"><code># Start SSE server with API key authentication
uvx --from . loxone-mcp-sse

# Disable authentication for local testing only
LOXONE_SSE_REQUIRE_AUTH=false uvx --from . loxone-mcp-sse

# Production with custom API key
LOXONE_SSE_API_KEY=your-secure-key uvx --from . loxone-mcp-sse

# Use generated API key for curl/webhooks:
curl -H "Authorization: Bearer <api-key>" http://localhost:8000/sse
curl -H "X-API-Key: <api-key>" http://localhost:8000/sse</code></pre>
                </div>
            </div>
            
            <div class="language-card">
                <h4>‚å®Ô∏è Command Line (STDIN)</h4>
                <div class="code-container">
                    <div class="code-header">
                        <span class="code-title">CLI Usage</span>
                        <button class="copy-btn" onclick="copyCode('stdin-mode')">Copy</button>
                    </div>
                    <pre id="stdin-mode"><code># Direct MCP protocol via STDIN
echo '{"method":"list_rooms","params":{},"id":1}' | \
  uvx --from . loxone-mcp-server

# For scripts and automation
uv run python -m loxone_mcp

# Pipe commands from files
cat commands.json | uvx --from . loxone-mcp-server</code></pre>
                </div>
            </div>
            
            <div class="language-card">
                <h4>üê≥ Docker Deployment</h4>
                <div class="code-container">
                    <div class="code-header">
                        <span class="code-title">Secure Docker Compose</span>
                        <button class="copy-btn" onclick="copyCode('docker-deploy')">Copy</button>
                    </div>
                    <pre id="docker-deploy"><code># Using Docker Compose with authentication
docker-compose -f docker-compose.sse.yml up

# Environment variables for production
LOXONE_HOST=192.168.1.100
LOXONE_USER=your-username  
LOXONE_PASS=your-password
LOXONE_SSE_REQUIRE_AUTH=true
LOXONE_SSE_API_KEY=your-secure-api-key

# Check logs for generated API key
docker-compose -f docker-compose.sse.yml logs

# Test authenticated endpoint
curl -H "Authorization: Bearer <api-key>" \
  http://localhost:8000/health</code></pre>
                </div>
            </div>
        </div>
    </section>

    <!-- Examples Section -->
    <section class="section animate-on-scroll" id="examples">
        <h2>Natural Language Examples</h2>
        
        <div class="language-examples">
            <div class="language-card">
                <h4>üá¨üáß English Commands</h4>
                <ul>
                    <li>"Turn on all lights in the living room"</li>
                    <li>"Close all blinds upstairs"</li>
                    <li>"Set bedroom lights to 30%"</li>
                    <li>"Activate night mode"</li>
                    <li>"Check temperature in office"</li>
                </ul>
            </div>
            <div class="language-card">
                <h4>üá©üá™ Deutsche Befehle</h4>
                <ul>
                    <li>"Licht im Wohnzimmer einschalten"</li>
                    <li>"Alle Rolladen im OG runter"</li>
                    <li>"Schlafzimmer auf 30% dimmen"</li>
                    <li>"Nachtmodus aktivieren"</li>
                    <li>"Temperatur im B√ºro pr√ºfen"</li>
                </ul>
            </div>
            <div class="language-card">
                <h4>üåç Mixed Language</h4>
                <ul>
                    <li>"Turn off Licht in K√ºche"</li>
                    <li>"Rolladen in living room hoch"</li>
                    <li>"Dimme OG bathroom auf 20%"</li>
                    <li>"Morning routine starten"</li>
                    <li>"Check Luftfeuchtigkeit upstairs"</li>
                </ul>
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span class="code-title">Capability-Aware Discovery</span>
                <button class="copy-btn" onclick="copyCode('scene-code')">Copy</button>
            </div>
            <pre id="scene-code"><code># Check what your system can do first
get_available_capabilities()         # Shows only your available features

# Auto-discovery finds your devices
discover_all_devices()               # Analyzes your specific setup
get_devices_by_category("Lighting")  # Only shows if you have lights

# Configuration-aware control
control_device("your_room_light", "on")    # Only works if device exists
get_weather_data()                   # Only available if weather sensors found
get_security_status()                # Only works with security devices</code></pre>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span class="code-title">Dynamic Feature Detection</span>
                <button class="copy-btn" onclick="copyCode('sensor-code')">Copy</button>
            </div>
            <pre id="sensor-code"><code># Each feature automatically checks availability
if capabilities.has_weather:
    get_weather_data()                 # Only if weather stations exist
    
if capabilities.has_security:
    get_security_status()              # Only if security devices found

# Error handling with helpful guidance
> get_audio_zones()
{"error": "No audio devices available",
 "available_features": ["lighting", "blinds", "weather"]}

# Adaptive to your configuration - no hardcoded assumptions!</code></pre>
        </div>
    </section>

    <!-- Security Notice Section -->
    <section class="section animate-on-scroll" id="security">
        <h2>Security & Compatibility</h2>
        
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üîê</div>
                <h3>System Keychain Security</h3>
                <p><strong>OS-Level Encryption:</strong> All credentials stored in system keychain (macOS Keychain, Windows Credential Manager, Linux Secret Service). Zero cloud storage - complete local privacy with OS-managed encryption.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üé´</div>
                <h3>JWT Token Authentication</h3>
                <p><strong>Loxone Protocol:</strong> HMAC-based JWT token exchange with automatic refresh. Secure authentication flow using Gen 1 Miniserver's token API with connection health monitoring and graceful reconnection.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üåê</div>
                <h3>API Key Protection</h3>
                <p><strong>Web Integration Security:</strong> SSE server protected by auto-generated API keys. Bearer token or X-API-Key header authentication for n8n, Home Assistant, webhooks. Keys managed through setup wizard.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üõ°Ô∏è</div>
                <h3>Multi-Layer Security Model</h3>
                <p><strong>Defense in Depth:</strong> Environment variable override, constant-time comparisons, request logging, health check endpoints. Production-ready with Docker support and systematic credential management.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üè†</div>
                <h3>Local Network Architecture</h3>
                <p><strong>Zero External Dependencies:</strong> All communication stays within your home network. No cloud services, no external APIs. VPN recommended for remote access. Complete network isolation design.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚öôÔ∏è</div>
                <h3>Configuration-Aware Security</h3>
                <p><strong>Adaptive Authentication:</strong> Setup wizard detects your environment and configures appropriate security. Skip SSE if unneeded, auto-generate keys, environment overrides for CI/CD workflows.</p>
            </div>
        </div>

        <!-- Security Architecture Overview -->
        <div class="code-container">
            <div class="code-header">
                <span class="code-title">Comprehensive Security Architecture</span>
            </div>
            <div style="display: flex; justify-content: center; padding: 2rem 0;">
                <svg width="900" height="400" viewBox="0 0 900 400" style="background: var(--bg-secondary); border-radius: 8px;">
                    <!-- Background layers -->
                    <defs>
                        <linearGradient id="keychainGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:var(--secondary-color);stop-opacity:0.1"/>
                            <stop offset="100%" style="stop-color:var(--secondary-color);stop-opacity:0.3"/>
                        </linearGradient>
                        <linearGradient id="jwtGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:var(--primary-color);stop-opacity:0.1"/>
                            <stop offset="100%" style="stop-color:var(--primary-color);stop-opacity:0.3"/>
                        </linearGradient>
                        <linearGradient id="apiGrad" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" style="stop-color:var(--accent-color);stop-opacity:0.1"/>
                            <stop offset="100%" style="stop-color:var(--accent-color);stop-opacity:0.3"/>
                        </linearGradient>
                    </defs>
                    
                    <!-- Security Layer 1: System Keychain -->
                    <rect x="50" y="50" width="800" height="80" rx="10" fill="url(#keychainGrad)" stroke="var(--secondary-color)" stroke-width="2"/>
                    <text x="450" y="75" text-anchor="middle" fill="var(--text-primary)" font-family="inherit" font-size="14" font-weight="600">üîê System Keychain Security Layer</text>
                    <text x="120" y="95" fill="var(--text-secondary)" font-family="inherit" font-size="11">macOS Keychain</text>
                    <text x="320" y="95" fill="var(--text-secondary)" font-family="inherit" font-size="11">Windows Credential Manager</text>
                    <text x="580" y="95" fill="var(--text-secondary)" font-family="inherit" font-size="11">Linux Secret Service</text>
                    <text x="450" y="110" text-anchor="middle" fill="var(--text-secondary)" font-family="inherit" font-size="10">OS-Level Encryption ‚Ä¢ Zero Cloud Storage ‚Ä¢ Environment Override</text>
                    
                    <!-- Security Layer 2: Authentication Methods -->
                    <!-- JWT Section -->
                    <rect x="80" y="160" width="360" height="120" rx="8" fill="url(#jwtGrad)" stroke="var(--primary-color)" stroke-width="2"/>
                    <text x="260" y="185" text-anchor="middle" fill="var(--text-primary)" font-family="inherit" font-size="13" font-weight="600">üé´ JWT Token Authentication</text>
                    <text x="100" y="205" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ HMAC-SHA256 token exchange</text>
                    <text x="100" y="220" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ Automatic refresh before expiry</text>
                    <text x="100" y="235" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ Connection health monitoring</text>
                    <text x="100" y="250" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ Loxone Gen1 API compatibility</text>
                    <text x="100" y="265" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ Graceful reconnection handling</text>
                    
                    <!-- API Key Section -->
                    <rect x="460" y="160" width="360" height="120" rx="8" fill="url(#apiGrad)" stroke="var(--accent-color)" stroke-width="2"/>
                    <text x="640" y="185" text-anchor="middle" fill="var(--text-primary)" font-family="inherit" font-size="13" font-weight="600">üåê API Key Protection</text>
                    <text x="480" y="205" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ 32-byte cryptographically secure</text>
                    <text x="480" y="220" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ Bearer token OR X-API-Key header</text>
                    <text x="480" y="235" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ Constant-time comparison</text>
                    <text x="480" y="250" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ Request logging & IP tracking</text>
                    <text x="480" y="265" fill="var(--text-secondary)" font-family="inherit" font-size="10">‚Ä¢ Auto-generation & keychain storage</text>
                    
                    <!-- Applications -->
                    <text x="260" y="305" text-anchor="middle" fill="var(--primary-color)" font-family="inherit" font-size="12" font-weight="600">For AI Assistants</text>
                    <text x="260" y="320" text-anchor="middle" fill="var(--text-secondary)" font-family="inherit" font-size="10">Claude Desktop ‚Ä¢ MCP Protocol</text>
                    
                    <text x="640" y="305" text-anchor="middle" fill="var(--accent-color)" font-family="inherit" font-size="12" font-weight="600">For Web Integrations</text>
                    <text x="640" y="320" text-anchor="middle" fill="var(--text-secondary)" font-family="inherit" font-size="10">n8n ‚Ä¢ Home Assistant ‚Ä¢ Webhooks</text>
                    
                    <!-- Security Features -->
                    <text x="450" y="350" text-anchor="middle" fill="var(--text-primary)" font-family="inherit" font-size="12" font-weight="600">üõ°Ô∏è Production Security Features</text>
                    <text x="200" y="370" text-anchor="middle" fill="var(--text-secondary)" font-family="inherit" font-size="10">Health Checks</text>
                    <text x="320" y="370" text-anchor="middle" fill="var(--text-secondary)" font-family="inherit" font-size="10">Docker Support</text>
                    <text x="450" y="370" text-anchor="middle" fill="var(--text-secondary)" font-family="inherit" font-size="10">Setup Wizard</text>
                    <text x="580" y="370" text-anchor="middle" fill="var(--text-secondary)" font-family="inherit" font-size="10">CI/CD Override</text>
                    <text x="700" y="370" text-anchor="middle" fill="var(--text-secondary)" font-family="inherit" font-size="10">Local Network Only</text>
                </svg>
            </div>
        </div>

        <!-- Dual Authentication Flow Diagram -->
        <div class="code-container">
            <div class="code-header">
                <span class="code-title">Dual Authentication Flows</span>
            </div>
            <div style="display: flex; justify-content: center; padding: 2rem 0;">
                <svg width="1000" height="600" viewBox="0 0 1000 600" style="background: var(--bg-secondary); border-radius: 8px;">
                    <!-- Title -->
                    <text x="500" y="30" text-anchor="middle" fill="var(--text-primary)" font-family="inherit" font-size="16" font-weight="600">Complete Authentication Architecture</text>
                    
                    <!-- Flow 1: MCP + JWT Authentication -->
                    <g id="mcp-flow">
                        <text x="250" y="60" text-anchor="middle" fill="var(--primary-color)" font-family="inherit" font-size="14" font-weight="600">üé´ MCP Mode: JWT Token Authentication</text>
                        
                        <!-- Actors for MCP flow -->
                        <rect x="50" y="80" width="80" height="30" rx="4" fill="var(--primary-color)" opacity="0.8"/>
                        <text x="90" y="100" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">MCP Server</text>
                        
                        <rect x="150" y="80" width="80" height="30" rx="4" fill="var(--secondary-color)" opacity="0.8"/>
                        <text x="190" y="100" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">Keychain</text>
                        
                        <rect x="250" y="80" width="80" height="30" rx="4" fill="var(--accent-color)" opacity="0.8"/>
                        <text x="290" y="100" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">Loxone Gen1</text>
                        
                        <rect x="350" y="80" width="80" height="30" rx="4" fill="var(--warning-color)" opacity="0.8"/>
                        <text x="390" y="100" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">Claude AI</text>
                        
                        <!-- Lifelines for MCP -->
                        <g stroke="var(--text-muted)" stroke-width="1" stroke-dasharray="3,3">
                            <line x1="90" y1="110" x2="90" y2="280"/>
                            <line x1="190" y1="110" x2="190" y2="280"/>
                            <line x1="290" y1="110" x2="290" y2="280"/>
                            <line x1="390" y1="110" x2="390" y2="280"/>
                        </g>
                        
                        <!-- MCP Messages -->
                        <g font-family="inherit" font-size="9">
                            <!-- Setup -->
                            <g transform="translate(0,130)">
                                <line x1="90" y1="0" x2="190" y2="0" stroke="var(--secondary-color)" stroke-width="2" marker-end="url(#arrow1)"/>
                                <text x="140" y="-3" text-anchor="middle" fill="var(--text-primary)">1. Store Loxone creds</text>
                            </g>
                            
                            <!-- AI Request -->
                            <g transform="translate(0,150)">
                                <line x1="390" y1="0" x2="90" y2="0" stroke="var(--warning-color)" stroke-width="2" marker-end="url(#arrow1)"/>
                                <text x="240" y="-3" text-anchor="middle" fill="var(--text-primary)">2. "Turn on lights"</text>
                            </g>
                            
                            <!-- Get Credentials -->
                            <g transform="translate(0,170)">
                                <line x1="90" y1="0" x2="190" y2="0" stroke="var(--secondary-color)" stroke-width="2" marker-end="url(#arrow1)"/>
                                <text x="140" y="-3" text-anchor="middle" fill="var(--text-primary)">3. Get creds</text>
                            </g>
                            
                            <!-- JWT Exchange -->
                            <g transform="translate(0,190)">
                                <line x1="90" y1="0" x2="290" y2="0" stroke="var(--accent-color)" stroke-width="2" marker-end="url(#arrow1)"/>
                                <text x="190" y="-3" text-anchor="middle" fill="var(--text-primary)">4. JWT token exchange</text>
                            </g>
                            
                            <!-- Device Control -->
                            <g transform="translate(0,210)">
                                <line x1="90" y1="0" x2="290" y2="0" stroke="var(--primary-color)" stroke-width="2" marker-end="url(#arrow1)"/>
                                <text x="190" y="-3" text-anchor="middle" fill="var(--text-primary)">5. Device control</text>
                            </g>
                            
                            <!-- Response -->
                            <g transform="translate(0,230)">
                                <line x1="90" y1="0" x2="390" y2="0" stroke="var(--warning-color)" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrow1)"/>
                                <text x="240" y="-3" text-anchor="middle" fill="var(--text-primary)">6. "Lights turned on"</text>
                            </g>
                        </g>
                    </g>
                    
                    <!-- Flow 2: SSE + API Key Authentication -->
                    <g id="sse-flow">
                        <text x="750" y="60" text-anchor="middle" fill="var(--accent-color)" font-family="inherit" font-size="14" font-weight="600">üåê SSE Mode: API Key Authentication</text>
                        
                        <!-- Actors for SSE flow -->
                        <rect x="550" y="80" width="80" height="30" rx="4" fill="var(--primary-color)" opacity="0.8"/>
                        <text x="590" y="100" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">SSE Server</text>
                        
                        <rect x="650" y="80" width="80" height="30" rx="4" fill="var(--secondary-color)" opacity="0.8"/>
                        <text x="690" y="100" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">Keychain</text>
                        
                        <rect x="750" y="80" width="80" height="30" rx="4" fill="var(--accent-color)" opacity="0.8"/>
                        <text x="790" y="100" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">Loxone Gen1</text>
                        
                        <rect x="850" y="80" width="80" height="30" rx="4" fill="var(--warning-color)" opacity="0.8"/>
                        <text x="890" y="100" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">n8n/HA</text>
                        
                        <!-- Lifelines for SSE -->
                        <g stroke="var(--text-muted)" stroke-width="1" stroke-dasharray="3,3">
                            <line x1="590" y1="110" x2="590" y2="280"/>
                            <line x1="690" y1="110" x2="690" y2="280"/>
                            <line x1="790" y1="110" x2="790" y2="280"/>
                            <line x1="890" y1="110" x2="890" y2="280"/>
                        </g>
                        
                        <!-- SSE Messages -->
                        <g font-family="inherit" font-size="9">
                            <!-- Setup -->
                            <g transform="translate(0,130)">
                                <line x1="590" y1="0" x2="690" y2="0" stroke="var(--secondary-color)" stroke-width="2" marker-end="url(#arrow2)"/>
                                <text x="640" y="-3" text-anchor="middle" fill="var(--text-primary)">1. Store API key</text>
                            </g>
                            
                            <!-- Web Request -->
                            <g transform="translate(0,150)">
                                <line x1="890" y1="0" x2="590" y2="0" stroke="var(--warning-color)" stroke-width="2" marker-end="url(#arrow2)"/>
                                <text x="740" y="-3" text-anchor="middle" fill="var(--text-primary)">2. Bearer token request</text>
                            </g>
                            
                            <!-- Verify API Key -->
                            <g transform="translate(0,170)">
                                <line x1="590" y1="0" x2="690" y2="0" stroke="var(--secondary-color)" stroke-width="2" marker-end="url(#arrow2)"/>
                                <text x="640" y="-3" text-anchor="middle" fill="var(--text-primary)">3. Verify key</text>
                            </g>
                            
                            <!-- JWT Exchange (internal) -->
                            <g transform="translate(0,190)">
                                <line x1="590" y1="0" x2="790" y2="0" stroke="var(--accent-color)" stroke-width="2" marker-end="url(#arrow2)"/>
                                <text x="690" y="-3" text-anchor="middle" fill="var(--text-primary)">4. JWT + Device control</text>
                            </g>
                            
                            <!-- Response -->
                            <g transform="translate(0,210)">
                                <line x1="590" y1="0" x2="890" y2="0" stroke="var(--warning-color)" stroke-width="2" stroke-dasharray="3,3" marker-end="url(#arrow2)"/>
                                <text x="740" y="-3" text-anchor="middle" fill="var(--text-primary)">5. JSON response</text>
                            </g>
                        </g>
                    </g>
                    
                    <!-- Setup Flow -->
                    <g id="setup-flow">
                        <text x="500" y="320" text-anchor="middle" fill="var(--primary-color)" font-family="inherit" font-size="14" font-weight="600">üîê One-Time Setup Wizard</text>
                        
                        <!-- Setup steps -->
                        <rect x="100" y="340" width="800" height="200" rx="8" fill="var(--bg-card)" stroke="var(--primary-color)" stroke-width="1"/>
                        
                        <g font-family="inherit" font-size="12" fill="var(--text-primary)">
                            <text x="120" y="365" font-weight="600">$ uvx --from . loxone-mcp setup</text>
                            
                            <!-- Step 1 -->
                            <text x="140" y="390" fill="var(--secondary-color)" font-weight="600">1. Network Discovery</text>
                            <text x="160" y="405" font-size="10" fill="var(--text-secondary)">‚Ä¢ Auto-discover Miniservers on network</text>
                            <text x="160" y="418" font-size="10" fill="var(--text-secondary)">‚Ä¢ Test connection before storing</text>
                            
                            <!-- Step 2 -->
                            <text x="350" y="390" fill="var(--secondary-color)" font-weight="600">2. Loxone Credentials</text>
                            <text x="370" y="405" font-size="10" fill="var(--text-secondary)">‚Ä¢ Store in OS keychain (encrypted)</text>
                            <text x="370" y="418" font-size="10" fill="var(--text-secondary)">‚Ä¢ Environment override available</text>
                            
                            <!-- Step 3 -->
                            <text x="140" y="450" fill="var(--accent-color)" font-weight="600">3. SSE API Key</text>
                            <text x="160" y="465" font-size="10" fill="var(--text-secondary)">‚Ä¢ Generate secure 32-byte token</text>
                            <text x="160" y="478" font-size="10" fill="var(--text-secondary)">‚Ä¢ Custom key or skip options</text>
                            <text x="160" y="491" font-size="10" fill="var(--text-secondary)">‚Ä¢ Store alongside Loxone creds</text>
                            
                            <!-- Step 4 -->
                            <text x="350" y="450" fill="var(--accent-color)" font-weight="600">4. Security Validation</text>
                            <text x="370" y="465" font-size="10" fill="var(--text-secondary)">‚Ä¢ Test both MCP and SSE auth</text>
                            <text x="370" y="478" font-size="10" fill="var(--text-secondary)">‚Ä¢ Display integration examples</text>
                            <text x="370" y="491" font-size="10" fill="var(--text-secondary)">‚Ä¢ Ready for production use</text>
                            
                            <!-- Result -->
                            <text x="600" y="390" fill="var(--primary-color)" font-weight="600">‚úÖ Complete Security Setup</text>
                            <text x="620" y="410" font-size="10" fill="var(--text-secondary)">üîê All credentials in OS keychain</text>
                            <text x="620" y="425" font-size="10" fill="var(--text-secondary)">üé´ JWT authentication ready</text>
                            <text x="620" y="440" font-size="10" fill="var(--text-secondary)">üåê API key protection enabled</text>
                            <text x="620" y="455" font-size="10" fill="var(--text-secondary)">üõ°Ô∏è Production deployment ready</text>
                            <text x="620" y="470" font-size="10" fill="var(--text-secondary)">üè† Local network security model</text>
                            <text x="620" y="485" font-size="10" fill="var(--text-secondary)">‚öôÔ∏è CI/CD environment overrides</text>
                        </g>
                    </g>
                    
                    <!-- Arrow markers -->
                    <defs>
                        <marker id="arrow1" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                            <polygon points="0 0, 8 3, 0 6" fill="currentColor"/>
                        </marker>
                        <marker id="arrow2" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
                            <polygon points="0 0, 8 3, 0 6" fill="currentColor"/>
                        </marker>
                    </defs>
                    
                    <!-- Security badges -->
                    <g font-family="inherit" font-size="10" fill="var(--text-muted)">
                        <text x="20" y="580">üîê OS Keychain Encryption</text>
                        <text x="200" y="580">üé´ HMAC-SHA256 JWT</text>
                        <text x="350" y="580">üåê Bearer Token Auth</text>
                        <text x="500" y="580">üõ°Ô∏è Constant-Time Comparison</text>
                        <text x="680" y="580">üè† Local Network Only</text>
                        <text x="820" y="580">‚öôÔ∏è Production Ready</text>
                    </g>
                </svg>
            </div>
        </div>

        <div class="code-container">
            <div class="code-header">
                <span class="code-title">Complete Security Architecture Deployment</span>
            </div>
            <div style="background: var(--bg-card); padding: 2rem; border-radius: 8px; margin: 1rem 0;">
                <svg viewBox="0 0 1000 700" style="width: 100%; height: auto; background: var(--bg-card);">
                    <!-- Title -->
                    <text x="500" y="30" text-anchor="middle" fill="var(--primary-color)" font-family="inherit" font-size="18" font-weight="700">üèóÔ∏è Security Architecture Deployment</text>
                    
                    <!-- Developer Machine -->
                    <g id="dev-machine">
                        <rect x="50" y="80" width="200" height="250" rx="12" fill="var(--bg-primary)" stroke="var(--primary-color)" stroke-width="2"/>
                        <text x="150" y="105" text-anchor="middle" fill="var(--primary-color)" font-family="inherit" font-size="14" font-weight="600">üíª Developer Machine</text>
                        
                        <!-- OS Keychain -->
                        <rect x="70" y="120" width="160" height="40" rx="6" fill="var(--secondary-color)" opacity="0.8"/>
                        <text x="150" y="135" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üîê OS Keychain</text>
                        <text x="150" y="148" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Encrypted Storage</text>
                        
                        <!-- MCP Server -->
                        <rect x="70" y="170" width="160" height="40" rx="6" fill="var(--accent-color)" opacity="0.8"/>
                        <text x="150" y="185" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">ü§ñ MCP Server</text>
                        <text x="150" y="198" text-anchor="middle" fill="white" font-family="inherit" font-size="8">JWT Authentication</text>
                        
                        <!-- SSE Server -->
                        <rect x="70" y="220" width="160" height="40" rx="6" fill="var(--warning-color)" opacity="0.8"/>
                        <text x="150" y="235" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üåê SSE Server</text>
                        <text x="150" y="248" text-anchor="middle" fill="white" font-family="inherit" font-size="8">API Key Auth</text>
                        
                        <!-- Claude Desktop -->
                        <rect x="70" y="270" width="160" height="40" rx="6" fill="var(--primary-color)" opacity="0.6"/>
                        <text x="150" y="285" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üß† Claude Desktop</text>
                        <text x="150" y="298" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Local MCP Client</text>
                    </g>
                    
                    <!-- Production Server -->
                    <g id="prod-server">
                        <rect x="400" y="80" width="200" height="250" rx="12" fill="var(--bg-primary)" stroke="var(--accent-color)" stroke-width="2"/>
                        <text x="500" y="105" text-anchor="middle" fill="var(--accent-color)" font-family="inherit" font-size="14" font-weight="600">üñ•Ô∏è Production Server</text>
                        
                        <!-- Environment Variables -->
                        <rect x="420" y="120" width="160" height="40" rx="6" fill="var(--secondary-color)" opacity="0.8"/>
                        <text x="500" y="135" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">‚öôÔ∏è Environment</text>
                        <text x="500" y="148" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Variable Override</text>
                        
                        <!-- Docker SSE -->
                        <rect x="420" y="170" width="160" height="40" rx="6" fill="var(--warning-color)" opacity="0.8"/>
                        <text x="500" y="185" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üê≥ Docker SSE</text>
                        <text x="500" y="198" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Port 8000</text>
                        
                        <!-- Health Check -->
                        <rect x="420" y="220" width="160" height="40" rx="6" fill="var(--primary-color)" opacity="0.6"/>
                        <text x="500" y="235" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">‚ù§Ô∏è Health Check</text>
                        <text x="500" y="248" text-anchor="middle" fill="white" font-family="inherit" font-size="8">/health endpoint</text>
                        
                        <!-- Monitoring -->
                        <rect x="420" y="270" width="160" height="40" rx="6" fill="var(--accent-color)" opacity="0.6"/>
                        <text x="500" y="285" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üìä Monitoring</text>
                        <text x="500" y="298" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Request Logging</text>
                    </g>
                    
                    <!-- External Integrations -->
                    <g id="integrations">
                        <rect x="750" y="80" width="200" height="250" rx="12" fill="var(--bg-primary)" stroke="var(--warning-color)" stroke-width="2"/>
                        <text x="850" y="105" text-anchor="middle" fill="var(--warning-color)" font-family="inherit" font-size="14" font-weight="600">üîå Integrations</text>
                        
                        <!-- n8n -->
                        <rect x="770" y="120" width="160" height="40" rx="6" fill="var(--warning-color)" opacity="0.8"/>
                        <text x="850" y="135" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">ü§ñ n8n Workflow</text>
                        <text x="850" y="148" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Bearer Token</text>
                        
                        <!-- Home Assistant -->
                        <rect x="770" y="170" width="160" height="40" rx="6" fill="var(--accent-color)" opacity="0.8"/>
                        <text x="850" y="185" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üè† Home Assistant</text>
                        <text x="850" y="198" text-anchor="middle" fill="white" font-family="inherit" font-size="8">X-API-Key Header</text>
                        
                        <!-- Custom Apps -->
                        <rect x="770" y="220" width="160" height="40" rx="6" fill="var(--primary-color)" opacity="0.8"/>
                        <text x="850" y="235" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üì± Custom Apps</text>
                        <text x="850" y="248" text-anchor="middle" fill="white" font-family="inherit" font-size="8">RESTful API</text>
                        
                        <!-- Web Dashboard -->
                        <rect x="770" y="270" width="160" height="40" rx="6" fill="var(--secondary-color)" opacity="0.8"/>
                        <text x="850" y="285" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üåê Web Dashboard</text>
                        <text x="850" y="298" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Browser Auth</text>
                    </g>
                    
                    <!-- Loxone Hardware -->
                    <g id="loxone-hw">
                        <rect x="250" y="450" width="500" height="120" rx="12" fill="var(--bg-primary)" stroke="var(--secondary-color)" stroke-width="2"/>
                        <text x="500" y="475" text-anchor="middle" fill="var(--secondary-color)" font-family="inherit" font-size="14" font-weight="600">üè† Loxone Generation 1 Infrastructure</text>
                        
                        <!-- Miniserver -->
                        <rect x="280" y="490" width="130" height="60" rx="6" fill="var(--secondary-color)" opacity="0.8"/>
                        <text x="345" y="510" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üß† Miniserver</text>
                        <text x="345" y="523" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Basic HTTP Auth</text>
                        <text x="345" y="536" text-anchor="middle" fill="white" font-family="inherit" font-size="8">192.168.x.x</text>
                        
                        <!-- Extensions -->
                        <rect x="430" y="490" width="120" height="60" rx="6" fill="var(--accent-color)" opacity="0.6"/>
                        <text x="490" y="510" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üîå Extensions</text>
                        <text x="490" y="523" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Dimmer/Relay</text>
                        <text x="490" y="536" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Tree/Bus</text>
                        
                        <!-- Devices -->
                        <rect x="570" y="490" width="120" height="60" rx="6" fill="var(--primary-color)" opacity="0.6"/>
                        <text x="630" y="510" text-anchor="middle" fill="white" font-family="inherit" font-size="10" font-weight="600">üí° Devices</text>
                        <text x="630" y="523" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Lights/Blinds</text>
                        <text x="630" y="536" text-anchor="middle" fill="white" font-family="inherit" font-size="8">Sensors</text>
                    </g>
                    
                    <!-- Connection Lines -->
                    <g stroke="var(--text-muted)" stroke-width="2" fill="none">
                        <!-- Dev to Loxone -->
                        <path d="M 250 200 Q 200 350 300 420" stroke="var(--primary-color)" marker-end="url(#deploy-arrow)"/>
                        
                        <!-- Prod to Loxone -->
                        <path d="M 500 330 L 500 450" stroke="var(--accent-color)" marker-end="url(#deploy-arrow)"/>
                        
                        <!-- Integrations to Prod -->
                        <path d="M 750 200 L 600 200" stroke="var(--warning-color)" marker-end="url(#deploy-arrow)"/>
                        
                        <!-- Claude to MCP -->
                        <ellipse cx="150" cy="240" rx="15" ry="25" stroke="var(--primary-color)" stroke-width="3" fill="none" opacity="0.3"/>
                    </g>
                    
                    <!-- Network Zones -->
                    <g font-family="inherit" font-size="12" fill="var(--text-muted)">
                        <text x="50" y="370" font-weight="600">üõ°Ô∏è Development Zone</text>
                        <text x="50" y="385" font-size="10">‚Ä¢ Local keychain security</text>
                        <text x="50" y="398" font-size="10">‚Ä¢ Direct MCP connection</text>
                        
                        <text x="400" y="370" font-weight="600">üöÄ Production Zone</text>
                        <text x="400" y="385" font-size="10">‚Ä¢ Environment variables</text>
                        <text x="400" y="398" font-size="10">‚Ä¢ Docker containerization</text>
                        
                        <text x="750" y="370" font-weight="600">üåê Integration Zone</text>
                        <text x="750" y="385" font-size="10">‚Ä¢ API key authentication</text>
                        <text x="750" y="398" font-size="10">‚Ä¢ RESTful endpoints</text>
                    </g>
                    
                    <!-- Security Flow Indicators -->
                    <g font-family="inherit" font-size="10" fill="var(--accent-color)">
                        <text x="270" y="180" font-weight="600">JWT</text>
                        <text x="650" y="180" font-weight="600">API Key</text>
                        <text x="480" y="430" font-weight="600">HTTP Auth</text>
                    </g>
                    
                    <!-- Deployment Legend -->
                    <g font-family="inherit" font-size="11" fill="var(--text-primary)">
                        <text x="50" y="620" font-weight="600" fill="var(--primary-color)">üèóÔ∏è Deployment Architecture:</text>
                        <text x="80" y="640" fill="var(--text-secondary)">üíª Development: Local MCP with OS keychain encryption</text>
                        <text x="80" y="655" fill="var(--text-secondary)">üñ•Ô∏è Production: Docker SSE with environment variable security</text>
                        <text x="80" y="670" fill="var(--text-secondary)">üîå Integrations: Web services use API key authentication over HTTPS</text>
                    </g>
                    
                    <!-- Arrow marker -->
                    <defs>
                        <marker id="deploy-arrow" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto">
                            <polygon points="0 0, 10 4, 0 8" fill="currentColor"/>
                        </marker>
                    </defs>
                </svg>
            </div>
        </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <a href="https://github.com/avrabe/mcp-loxone-gen1">GitHub Repository</a>
            <a href="https://github.com/avrabe/mcp-loxone-gen1/issues">Report Issues</a>
            <a href="https://github.com/avrabe/mcp-loxone-gen1/wiki">Documentation</a>
            <a href="https://github.com/avrabe/mcp-loxone-gen1/discussions">Community</a>
        </div>
        <p>&copy; 2025 Ralf Anton Beier. Released under MIT License.</p>
    </footer>

    <script>
        // Navigation scroll effect
        window.addEventListener('scroll', () => {
            const navbar = document.getElementById('navbar');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Observe all animate-on-scroll elements
        document.querySelectorAll('.animate-on-scroll').forEach(el => {
            observer.observe(el);
        });

        // Copy code functionality
        function copyCode(elementId) {
            const codeElement = document.getElementById(elementId);
            const text = codeElement.textContent;
            
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                const originalText = btn.textContent;
                btn.textContent = 'Copied!';
                btn.style.background = '#059669';
                
                setTimeout(() => {
                    btn.textContent = originalText;
                    btn.style.background = '';
                }, 2000);
            });
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Add subtle parallax effect to hero
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const hero = document.querySelector('.hero');
            const rate = scrolled * -0.3;
            if (hero) {
                hero.style.transform = `translateY(${rate}px)`;
            }
        });

        // Animate feature cards on hover
        document.querySelectorAll('.feature-card').forEach(card => {
            card.addEventListener('mouseenter', () => {
                card.style.transform = 'translateY(-8px) scale(1.02)';
            });
            
            card.addEventListener('mouseleave', () => {
                card.style.transform = 'translateY(0) scale(1)';
            });
        });

        // Animate stats on scroll
        const animateStats = () => {
            const statNumbers = document.querySelectorAll('.stat-number');
            statNumbers.forEach(stat => {
                const originalText = stat.textContent;
                
                // Skip animation for special symbols like ‚àû and %
                if (originalText === '‚àû' || originalText.includes('%')) {
                    return;
                }
                
                const target = parseInt(originalText);
                if (isNaN(target)) return;
                
                const increment = target / 100;
                let current = 0;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        stat.textContent = target;
                        clearInterval(timer);
                    } else {
                        stat.textContent = Math.floor(current);
                    }
                }, 20);
            });
        };

        // Trigger stats animation when stats section is visible
        const statsObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateStats();
                    statsObserver.unobserve(entry.target);
                }
            });
        });

        const statsSection = document.querySelector('.stats-grid');
        if (statsSection) {
            statsObserver.observe(statsSection);
        }

        // Matrix-style Automation Data Stream
        const automationQuotes = [
            // MCP Commands
            "get_available_capabilities()",
            "discover_all_devices()",
            "get_devices_by_category('Lighting')",
            "control_device('room_light', 'on')",
            "get_weather_data() ‚Üí if available",
            "get_security_status() ‚Üí if configured",
            "uvx --from . loxone-mcp-server",
            "get_climate_control() ‚Üí adaptive",
            "get_energy_consumption() ‚Üí dynamic",
            "list_rooms() ‚Üí auto-discovered",
            "get_device_status() ‚Üí real-time",
            "get_devices_by_type() ‚Üí categorized",
            "rediscover_sensors()",
            "get_system_status()",
            "get_available_capabilities()",
            
            // Device States & Sensors (Generic)
            "capabilities.has_lighting: true",
            "capabilities.has_weather: detected",
            "device_count: auto-counted",
            "room_mapping: synchronized",
            "sensor_discovery: active",
            "configuration_analysis: complete",
            "feature_detection: adaptive",
            "error_prevention: enabled",
            "uuid_discovery: {uuid}/state",
            "category_mapping: intelligent",
            "type_classification: automated",
            "real_time_monitoring: websocket",
            "capability_validation: continuous",
            "system_adaptation: dynamic",
            
            // System Data (Generic)
            "connection_status: active",
            "authentication_method: token_based",
            "capability_detection: complete",
            "device_discovery: ongoing",
            "structure_loaded: validated",
            "mcp_tools_count: 27",
            "auto_reconnect: enabled",
            "error_handling: graceful",
            "feature_adaptation: dynamic",
            "configuration_coverage: 100%",
            "ai_guidance: context_aware",
            "deployment_ready: multi_mode",
            
            // AI Automation Streams
            "The house learns your patterns...",
            "Smart home automation trickling down...",
            "AI assistants controlling reality...", 
            "Natural language becomes action...",
            "Your voice shapes the environment...",
            "Automation flows through every room...",
            "The smart home awakens...",
            "Intelligence embedded in every switch...",
            "Comfort algorithms optimizing...",
            "Your home anticipates your needs...",
            "Digital consciousness in physical space...",
            "The future is automated...",
            "Machine learning comfort patterns...",
            "Predictive climate control active...",
            "Voice commands shaping reality...",
            "Adaptive lighting following circadian...",
            "Energy optimization algorithms running...",
            "Behavioral pattern recognition online...",
            "Contextual automation engine active...",
            "Ambient intelligence awakening...",
            
            // Technical Streams (Generic)
            "HTTP/1.1 200 OK",
            "jdev/sps/io/{uuid}/state",
            "WebSocket connection established",
            "MCP protocol handshake complete",
            "FastMCP server listening",
            "Keychain authentication success",
            "Structure file loaded: analyzing...",
            "Device discovery: auto-detecting...",
            "Room mapping: synchronized",
            "Capability detection: active",
            "Connection health: monitoring",
            "Auto-reconnect: standby",
            "Feature validation: continuous",
            "Configuration analysis: complete",
            
            // Adaptive Features (Based on Configuration)
            "weather_capability: auto_detected",
            "security_capability: if_available", 
            "lighting_capability: discovered",
            "climate_capability: adaptive",
            "energy_capability: detected",
            "audio_capability: if_configured",
            "automation_rules: configuration_based",
            "device_categories: intelligent_mapping",
            "room_organization: auto_structured",
            "sensor_monitoring: real_time",
            
            // Generic Data Streams
            "system_status: operational",
            "feature_discovery: continuous",
            "capability_validation: active",
            "configuration_awareness: enabled",
            "error_prevention: intelligent",
            "ai_guidance: contextual",
            "deployment_flexibility: multi_mode",
            "user_configuration: respected",
            "device_support: unlimited",
            "category_detection: automated",
            
            // Configuration Intelligence
            "has_lighting: boolean_check",
            "has_blinds: auto_verified",
            "has_weather: sensor_scan",
            "has_security: capability_check",
            "has_energy: monitoring_scan",
            "has_audio: zone_detection",
            "has_climate: system_analysis",
            
            // Universal Capabilities
            "mcp_tools: 27_available",
            "deployment_modes: 4_supported",
            "language_support: multilingual",
            "credential_security: keychain_based",
            "auto_discovery: intelligent",
            "gen1_compatibility: full_support",
            "ai_assistance: configuration_aware",
            "error_handling: graceful_guidance",
            "feature_adaptation: dynamic_detection",
            "system_flexibility: unlimited_devices"
        ];

        function createMatrixQuote() {
            const quote = automationQuotes[Math.floor(Math.random() * automationQuotes.length)];
            const element = document.createElement('div');
            element.className = 'automation-quote';
            element.textContent = quote;
            
            // Random horizontal position
            element.style.left = Math.random() * 100 + '%';
            
            // Random animation delay
            element.style.animationDelay = Math.random() * -20 + 's';
            
            document.getElementById('matrix-bg').appendChild(element);
            
            // Remove element after animation completes
            setTimeout(() => {
                if (element.parentNode) {
                    element.parentNode.removeChild(element);
                }
            }, 35000);
        }

        // Create quotes at intervals
        function startMatrixEffect() {
            createMatrixQuote();
            // Random interval between 1-3 seconds for more data density
            setTimeout(startMatrixEffect, 1000 + Math.random() * 2000);
        }

        // Start the matrix effect after page loads
        window.addEventListener('load', () => {
            setTimeout(startMatrixEffect, 1000);
        });

        // Test Coverage Visualization
        async function loadTestCoverage() {
            try {
                // Try to fetch coverage data from GitHub Actions or local source
                const coverageData = await fetchCoverageData();
                updateCoverageDisplay(coverageData);
            } catch (error) {
                console.log('Coverage data not available, showing N/A');
                // Show N/A when coverage data isn't accessible
                updateCoverageDisplay({
                    coverage: 'N/A',
                    tests_passed: 'N/A',
                    tests_total: 'N/A',
                    lines_covered: 'N/A',
                    lines_total: 'N/A',
                    functions: 'N/A',
                    branches: 'N/A'
                });
            }
        }

        async function fetchCoverageData() {
            // Try multiple sources for coverage data
            const sources = [
                './coverage.json',  // Local/deployed coverage file (relative path)
                '/mcp-loxone-gen1/coverage.json',  // GitHub Pages absolute path
                'https://api.github.com/repos/avrabe/mcp-loxone-gen1/actions/runs?status=success&per_page=1', // GitHub Actions
                // Fallback to N/A data
            ];

            for (const source of sources) {
                try {
                    const response = await fetch(source);
                    if (response.ok) {
                        const data = await response.json();
                        return parseCoverageData(data, source);
                    }
                } catch (e) {
                    continue;
                }
            }
            throw new Error('No coverage data available');
        }

        function parseCoverageData(data, source) {
            // Parse different coverage data formats
            if (source.includes('coverage.json')) {
                // Parse pytest-cov JSON format
                const totals = data.totals || {};
                return {
                    coverage: Math.round(totals.percent_covered || 11),
                    tests_passed: 10, // From test run
                    tests_total: 10,
                    lines_covered: totals.covered_lines || 190,
                    lines_total: totals.num_statements || 1773,
                    functions: Object.keys(data.files || {}).length || 6,
                    branches: Math.round(totals.percent_covered || 11)
                };
            }
            
            // Fallback when other sources fail
            return {
                coverage: 'N/A',
                tests_passed: 'N/A',
                tests_total: 'N/A',
                lines_covered: 'N/A',
                lines_total: 'N/A',
                functions: 'N/A',
                branches: 'N/A'
            };
        }

        function updateCoverageDisplay(data) {
            const coveragePercentage = data.coverage;
            const isNA = coveragePercentage === 'N/A';
            const coverageAngle = isNA ? 0 : (coveragePercentage / 100) * 360;
            
            // Update the pie chart
            const coverageCircle = document.getElementById('coverage-circle');
            if (isNA) {
                // Show empty circle for N/A
                coverageCircle.style.background = `conic-gradient(
                    var(--text-muted) 0deg,
                    var(--text-muted) 360deg
                )`;
            } else {
                const gradientColor = coveragePercentage >= 80 ? 'var(--primary-color)' : 
                                     coveragePercentage >= 60 ? 'var(--accent-color)' : 
                                     'var(--warning-color)';
                
                coverageCircle.style.background = `conic-gradient(
                    ${gradientColor} 0deg,
                    ${gradientColor} ${coverageAngle}deg,
                    var(--bg-secondary) ${coverageAngle}deg,
                    var(--bg-secondary) 360deg
                )`;
            }
            
            // Update percentage display
            document.getElementById('coverage-percentage').textContent = isNA ? 'N/A' : `${coveragePercentage}%`;
            
            // Update detail stats
            document.getElementById('tests-passed').textContent = data.tests_passed === 'N/A' ? 'N/A' : `${data.tests_passed}/${data.tests_total}`;
            document.getElementById('lines-covered').textContent = data.lines_covered;
            document.getElementById('functions-tested').textContent = data.functions;
            document.getElementById('branches-covered').textContent = data.branches === 'N/A' ? 'N/A' : `${data.branches}%`;
            
            // Add animation classes only if not N/A
            if (!isNA) {
                setTimeout(() => {
                    coverageCircle.style.animation = 'coverageRotate 2s ease-out';
                }, 500);
            }
        }

        // Load coverage data when page loads
        window.addEventListener('load', () => {
            setTimeout(loadTestCoverage, 2000); // Load after other animations
        });

        // Virtual Terminal Demo
        let terminalDemo = null;
        let terminalRunning = false;

        const terminalScript = [
            { type: 'command', text: 'uvx --from . loxone-mcp setup', delay: 80 },
            { type: 'output', text: '', delay: 800 },
            { type: 'output', text: 'üîê Loxone MCP Server Setup', delay: 50 },
            { type: 'output', text: '========================================', delay: 50 },
            { type: 'output', text: '', delay: 300 },
            { type: 'output', text: 'üîç Discovering Loxone Miniservers on your network...', delay: 100 },
            { type: 'progress', text: '   ‚Ä¢ Trying UDP discovery...', delay: 1000 },
            { type: 'output', text: ' ‚è≠Ô∏è  No response', delay: 50 },
            { type: 'progress', text: '   ‚Ä¢ Scanning network for HTTP endpoints...', delay: 1500 },
            { type: 'output', text: ' ‚úÖ Found 2 server(s)', delay: 50 },
            { type: 'output', text: '', delay: 300 },
            { type: 'output', text: '‚úÖ Found 2 Loxone Miniserver(s) on your network:', delay: 50 },
            { type: 'output', text: '', delay: 200 },
            { type: 'output', text: '  1. Loxone Miniserver (v14.2.5.8) at 192.168.1.42 (HTTP Scan)', delay: 50 },
            { type: 'output', text: '  2. Loxone Miniserver at 192.168.1.85 (HTTP Scan)', delay: 50 },
            { type: 'output', text: '', delay: 200 },
            { type: 'output', text: '  3. Enter IP address manually', delay: 50 },
            { type: 'output', text: '', delay: 200 },
            { type: 'output', text: '  0. Cancel setup', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'prompt', text: 'Select an option (1-3, or 0 to cancel): ', delay: 100 },
            { type: 'input', text: '1', delay: 800 },
            { type: 'output', text: '', delay: 300 },
            { type: 'output', text: '‚úÖ Selected: Loxone Miniserver (v14.2.5.8) at 192.168.1.42', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'output', text: 'This wizard will securely store your Loxone credentials', delay: 50 },
            { type: 'output', text: 'in your system keychain.', delay: 50 },
            { type: 'output', text: '', delay: 300 },
            { type: 'output', text: 'Please enter your Loxone Miniserver details:', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'prompt', text: 'Username: ', delay: 100 },
            { type: 'input', text: 'homeowner', delay: 1200 },
            { type: 'prompt', text: 'Password: ', delay: 100 },
            { type: 'input', text: '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢', delay: 1000 },
            { type: 'output', text: '', delay: 500 },
            { type: 'output', text: 'üîå Testing connection...', delay: 100 },
            { type: 'output', text: '', delay: 2000 },
            { type: 'output', text: '‚úÖ Successfully connected to Loxone Miniserver!', delay: 50 },
            { type: 'output', text: '   Miniserver: Smart Home Controller', delay: 50 },
            { type: 'output', text: '   Version: 14.2.5.8', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'output', text: '‚úÖ Credentials stored successfully!', delay: 50 },
            { type: 'output', text: '   Host: 192.168.1.42', delay: 50 },
            { type: 'output', text: '   User: homeowner', delay: 50 },
            { type: 'output', text: '   Pass: ************', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'output', text: 'üîç Analyzing your Loxone configuration...', delay: 100 },
            { type: 'output', text: '   ‚úÖ Lighting devices: detected', delay: 50 },
            { type: 'output', text: '   ‚úÖ Blinds/Rolladen: discovered', delay: 50 },
            { type: 'output', text: '   ‚úÖ Weather sensors: found', delay: 50 },
            { type: 'output', text: '   ‚ö†Ô∏è  Security devices: not available', delay: 50 },
            { type: 'output', text: '   ‚ö†Ô∏è  Audio zones: not available', delay: 50 },
            { type: 'output', text: '', delay: 300 },
            { type: 'output', text: 'üéØ MCP configured for YOUR specific setup!', delay: 50 },
            { type: 'output', text: '   Only available features will be exposed to AI', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'output', text: 'üåê SSE Server Setup (for web integrations)', delay: 50 },
            { type: 'output', text: '============================================', delay: 50 },
            { type: 'output', text: '', delay: 300 },
            { type: 'output', text: 'Choose SSE API key setup:', delay: 50 },
            { type: 'output', text: '  1. Generate secure API key automatically (recommended)', delay: 50 },
            { type: 'output', text: '  2. Enter custom API key', delay: 50 },
            { type: 'output', text: '  3. Skip SSE setup (can be configured later)', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'prompt', text: 'Select option [1-3]: ', delay: 100 },
            { type: 'input', text: '1', delay: 800 },
            { type: 'output', text: '', delay: 300 },
            { type: 'output', text: 'üîë Generated and stored SSE API key!', delay: 50 },
            { type: 'output', text: '   API Key: Xy9Kj4LmNp2QrS8tUvWx3YzA6BcDeF7gHiJkLmN9', delay: 50 },
            { type: 'output', text: '', delay: 300 },
            { type: 'output', text: 'üìã Use for n8n/Home Assistant/webhooks:', delay: 50 },
            { type: 'output', text: '   Authorization: Bearer <api-key>', delay: 50 },
            { type: 'output', text: '   OR X-API-Key: <api-key>', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'output', text: '‚úÖ Complete security setup finished!', delay: 50 },
            { type: 'output', text: '   üîê Loxone credentials ‚Üí OS keychain', delay: 50 },
            { type: 'output', text: '   üîë SSE API key ‚Üí OS keychain', delay: 50 },
            { type: 'output', text: '   üõ°Ô∏è JWT token auth ‚Üí Ready', delay: 50 },
            { type: 'output', text: '', delay: 500 },
            { type: 'output', text: 'üìù Next steps:', delay: 50 },
            { type: 'output', text: '1. Test MCP: uv run mcp dev src/loxone_mcp/server.py', delay: 50 },
            { type: 'output', text: '2. Test SSE: uvx --from . loxone-mcp-sse', delay: 50 },
            { type: 'output', text: '3. Configure Claude Desktop (see README.md)', delay: 50 },
            { type: 'output', text: '', delay: 3000 },
            { type: 'command', text: '', delay: 500 }
        ];

        function typeText(element, text, speed = 50) {
            return new Promise(resolve => {
                let i = 0;
                const timer = setInterval(() => {
                    if (i < text.length) {
                        element.textContent += text.charAt(i);
                        i++;
                    } else {
                        clearInterval(timer);
                        resolve();
                    }
                }, speed);
            });
        }

        function addTerminalLine(content, className = 'terminal-output') {
            const terminalBody = document.getElementById('terminal-output');
            const line = document.createElement('div');
            line.className = `terminal-line ${className}`;
            line.textContent = content;
            terminalBody.appendChild(line);
            
            // Auto-scroll to bottom
            terminalBody.scrollTop = terminalBody.scrollHeight;
            return line;
        }

        function removeCursor() {
            const cursor = document.querySelector('.terminal-cursor');
            if (cursor) cursor.remove();
        }

        function addCursor(element) {
            const cursor = document.createElement('span');
            cursor.className = 'terminal-cursor';
            cursor.textContent = '_';
            element.appendChild(cursor);
        }

        async function runTerminalDemo() {
            if (terminalRunning) return;
            terminalRunning = true;

            const terminalBody = document.getElementById('terminal-output');
            terminalBody.innerHTML = '';

            for (let i = 0; i < terminalScript.length; i++) {
                const step = terminalScript[i];
                
                if (!terminalRunning) break; // Stop if demo was restarted

                await new Promise(resolve => setTimeout(resolve, step.delay));

                switch (step.type) {
                    case 'command':
                        if (step.text) {
                            const line = addTerminalLine('$ ', 'terminal-prompt');
                            await typeText(line, step.text, 80);
                        } else {
                            addTerminalLine('$ ', 'terminal-prompt');
                            addCursor(terminalBody.lastElementChild);
                        }
                        break;
                    
                    case 'output':
                        addTerminalLine(step.text, 'terminal-output');
                        break;
                    
                    case 'progress':
                        const progressLine = addTerminalLine(step.text, 'terminal-info');
                        break;
                    
                    case 'prompt':
                        const promptLine = addTerminalLine(step.text, 'terminal-output');
                        promptLine.style.display = 'inline';
                        break;
                    
                    case 'input':
                        const inputLine = document.createElement('span');
                        inputLine.className = 'terminal-input';
                        terminalBody.lastElementChild.appendChild(inputLine);
                        await typeText(inputLine, step.text, 150);
                        addTerminalLine('', 'terminal-output');
                        break;
                }
            }

            // Wait 5 seconds then restart
            setTimeout(() => {
                if (terminalRunning) {
                    runTerminalDemo();
                }
            }, 5000);
        }

        function restartTerminalDemo() {
            terminalRunning = false;
            setTimeout(() => {
                terminalRunning = false;
                runTerminalDemo();
            }, 100);
        }

        // Start terminal demo when section becomes visible
        const terminalObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting && !terminalRunning) {
                    setTimeout(() => runTerminalDemo(), 1000);
                    terminalObserver.unobserve(entry.target);
                }
            });
        });

        window.addEventListener('load', () => {
            const terminalDemo = document.querySelector('.terminal-demo');
            if (terminalDemo) {
                terminalObserver.observe(terminalDemo);
            }
        });
    </script>
</body>
</html>